{% extends "layout.html" %}
{% block content %}
    <h2 class="mb-3">Archived Tasks</h2>
    <div class="d-flex gap-2 mb-3">
        <a href="/download-archived" class="btn btn-outline-primary">Download as CSV</a>
        <a href="/" class="btn btn-secondary">Back to Active Tasks</a>
    </div>
    <table class="table table-bordered table-hover align-middle">
        <thead class="table-light">
            <tr>
                <th>S.No</th>
                <th>Subject</th>
                <th>Description</th>
                <th>Start Date</th>
                <th>Due Date</th>
                <th>Stakeholders</th>
                <th>Impact</th>
                <th>Created At</th>
                <th>Completed At</th>
            </tr>
        </thead>
        <tbody>
            {% for task in tasks %}
            <tr>
                <td>{{ loop.index }}</td>
                <td>{{ task.subject }}</td>
                <td>{{ task.description or '-' }}</td>
                <td>{{ task.start_date.strftime('%Y-%m-%d') if task.start_date else '-' }}</td>
                <td>{{ task.due_date.strftime('%Y-%m-%d') if task.due_date else '-' }}</td>
                <td>{{ task.stakeholders or '-' }}</td>
                <td>{{ task.impact or '-' }}</td>
                <td>{{ task.created_at.strftime('%Y-%m-%d %H:%M') if task.created_at }}</td>
                <td>{{ task.completed_at.strftime('%Y-%m-%d %H:%M') if task.completed_at }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
{% endblock %}
